# NetPulse FX - 专业级网络流量监控与智能分析系统

**NetPulse FX** 是一款基于 **Java 21** 开发的现代化模块化网络监控工具。它不仅能提供实时的底层数据包捕获与进程级流量分析，还集成 **AI 智能分析引擎**（支持 DeepSeek、OpenAI、Ollama 等多种提供商），为用户提供深度的网络行为诊断与安全建议。

---

## 快速开始

### 1. 环境准备
* **Java Runtime**: 必须安装 **JDK 21** 或更高版本。
* **底层驱动**:
    * **Windows**: 必须安装 [Npcap](https://npcap.com/)（推荐）或 WinPcap。安装时请勾选“以兼容模式运行”。
    * **Linux/macOS**: 确保已安装 `libpcap`。
* **权限说明**: 由于需要访问底层网卡驱动，请确保以 **管理员身份/Root** 权限启动程序。

### 2. AI 诊断配置
本项目支持多种 AI 提供商（DeepSeek、OpenAI、Ollama）进行智能分析。初次使用请：
1.  查阅根目录下的 `AI_CONFIG.md` 了解详细配置方法。
2.  通过环境变量设置 **API Key** 和对应的模型（详见 `AI_CONFIG.md`）。
3.  启动程序后，状态栏会显示 `AI 状态：已连接{提供商名称}`，表示配置成功。

---

## 核心功能

### 实时监控与 BPF 过滤
* **多网卡支持**: 自动识别系统可用网卡，支持 IP 与 MAC 地址显示。
* **BPF 引擎**: 支持工业标准 **BPF (Berkeley Packet Filter)** 表达式（如 `tcp and port 80`）。
* **性能优化**: 过滤算子下沉至内核态，极大降低了应用层的 CPU 开销与丢包率。

### 进程级流量追踪
* **精准关联**: 实时将网络连接（5元组）映射至系统 **PID** 与 **进程名称**。
* **可视化占比**: 列表内嵌动态进度条，直观展示哪些应用正在消耗您的带宽。

### AI 智能行为诊断
* **一键分析**: 在历史数据查看窗口中，选择监控会话后点击"AI 诊断"按钮，系统自动提取流量特征（协议分布、流速曲线、异常连接）。
* **深度报告**: 自动识别 **DDoS 攻击、隐蔽隧道、异常心跳** 等潜在风险，生成专业的 Markdown 格式分析报告。

### 数据导出与报表
* **H2 持久化**: 采用高性能嵌套存储，支持海量历史会话检索。
* **Excel 明细**: 导出原始流量数据，方便进行离线审计。
* **PDF 报告**: 生成包含 AI 结论的富文本诊断报告，专业美观。

---

## 常见问题排查 (Troubleshooting)

| 问题现象 | 可能原因 | 解决方案 |
| :--- | :--- | :--- |
| **网卡列表为空** | Npcap 驱动未安装或驱动服务未启动 | 重新安装 Npcap 或在服务中手动启动 `npcap` 服务 |
| **提示权限不足** | 未使用管理员身份运行 | 右键点击 `.exe` 或 IDE 启动项，选择“以管理员身份运行” |
| **AI 诊断报错** | 网络连接超时或 API Key 余额不足 | 参考 `AI_SERVICE_USAGE.md` 检查 API 状态与网络配置 |
| **上下行速度一致** | 统计逻辑未正确匹配本地网卡 IP | 在主页选择网卡后，确认 IP 字段显示正确 |

---

## 技术文档索引
本项目内置了详细的技术实现文档，您可以通过主界面右上角的 **[帮助]** 按钮打开帮助中心查阅：

* **配置类**:
    * `AI_CONFIG.md`: AI 接口调用与参数调优指南。
    * `AI_SERVICE_USAGE.md`: AI 流量分析服务使用指南。
* **功能类**:
    * `IP_LOCATION_FEATURE.md`: IP 归属地查询功能使用说明。
    * `PROCESS_TRAFFIC_MONITOR.md`: 进程流量监控面板功能说明。

---

## 项目信息
* **核心技术栈**: JavaFX 21 + Pcap4j + H2 Database + Flexmark + iText 7
* **当前版本**: v1.0-SNAPSHOT

---
> **提示**: 本 README 文档已集成到帮助中心，可通过主界面右上角的"帮助"按钮查看。